metrics:
  # System metrics
  system:
    path: "system"
    metrics:
      - name: "cpu_load"
        field: "cpuload"
        type: "gauge"
        help: "CPU load percentage"
      - name: "memory_usage"
        field: "memory"
        type: "gauge"
        help: "Current memory usage in KB"
      - name: "memory_total"
        field: "memtotal"
        type: "gauge"
        help: "Total memory in KB"
      - name: "memory_free"
        field: "memfree"
        type: "gauge"
        help: "Free memory in KB"
      - name: "memory_buffers"
        field: "membuffers"
        type: "gauge"
        help: "Memory used by buffers in KB"
      - name: "memory_cache"
        field: "memcache"
        type: "gauge"
        help: "Memory used by cache in KB"
      - name: "connections_total"
        field: "conntotal"
        type: "gauge"
        help: "Total number of possible connections"
      - name: "connections_free"
        field: "connfree"
        type: "gauge"
        help: "Number of free connections"
      - name: "uptime"
        field: "uptime"
        type: "counter"
        help: "System uptime in seconds"

  # Interface metrics
  interface_usblte0:
    path: "interface/UsbLte0"
    metrics:
      - name: "signal_strength"
        field: "rssi"
        type: "gauge"
        help: "LTE signal strength in dBm"
      - name: "signal_level"
        field: "signal-level"
        type: "gauge"
        help: "LTE signal quality level (0-5)"
      - name: "rsrp"
        field: "rsrp"
        type: "gauge"
        help: "Reference Signal Received Power in dBm"
      - name: "rsrq"
        field: "rsrq"
        type: "gauge"
        help: "Reference Signal Received Quality in dB"
      - name: "cinr"
        field: "cinr"
        type: "gauge"
        help: "Carrier to Interference plus Noise Ratio in dB"
      - name: "temperature"
        field: "temperature"
        type: "gauge"
        help: "Modem temperature in Celsius"
      - name: "interface_uptime"
        field: "uptime"
        type: "counter"
        help: "Interface uptime in seconds"

  interface_usblte0_traffic:
    path: "interface/traffic-counter"
    params:
      name: "UsbLte0"
      noformat: true
    metrics:
      - name: "traffic_value"
        field: "value"
        type: "gauge"
        help: "Current traffic usage in KiB"
      - name: "traffic_threshold"
        field: "threshold"
        type: "gauge"
        help: "Traffic threshold in KiB"
      - name: "traffic_limit"
        field: "limit"
        type: "gauge"
        help: "Traffic limit in KiB"
      - name: "traffic_remaining"
        field: "remaining"
        type: "gauge"
        help: "Remaining traffic in KiB"
      - name: "traffic_days_left"
        field: "days-left"
        type: "gauge"
        help: "Days left in current period"

  # WiFi clients metrics
  hotspot_clients:
    path: "ip/hotspot"
    metrics:
      - name: "connected_clients_total"
        type: "gauge"
        help: "Total number of connected clients"
        calculate: "length(host[?active===true])"

      - name: "client_uptime"
        type: "gauge"
        help: "Client connection uptime in seconds"
        labels:
          - "mac"
          - "name"
          - "hostname"
        field: "uptime"
        array_selector: "host[?active===true]"

      - name: "client_received_bytes"
        type: "counter"
        help: "Total bytes received from client"
        labels:
          - "mac"
          - "name"
          - "hostname"
        field: "rxbytes"
        array_selector: "host[?active===true]"

      - name: "client_transmitted_bytes"
        type: "counter"
        help: "Total bytes transmitted to client"
        labels:
          - "mac"
          - "name"
          - "hostname"
        field: "txbytes"
        array_selector: "host[?active===true]"

      - name: "client_signal_strength"
        type: "gauge"
        help: "Client signal strength in dBm"
        labels:
          - "mac"
          - "name"
          - "hostname"
        field: "rssi"
        array_selector: "host[?ssid]"
